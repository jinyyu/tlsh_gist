create extension tlsh_gist;
select '1416333B50A89B0BB8DED2FC7DF6089B59548AA14B90ED814341DEBF70C9B44CD443AE'::tlsh <-> 'CED022BA04220094C02986B0C8B708C26E529065828BA0A04869A2F2DB060EDBE8E902'::tlsh;
 ?column? 
----------
     1216
(1 row)

create table test_tlsh(v tlsh);
insert into test_tlsh (v) values ('30e5be217761c8b1c27213314d18b62a58bdbdf02b35d2ababe9352c5e780c1b677793');
select v <-> '30e5be217761c8b1c27213314d18b62a58bdbdf02b35d2ababe9352c5e780c1b677795' as diff from test_tlsh;
 diff 
------
    3
(1 row)

select v <-> NULL  as diff from test_tlsh;
 diff 
------
     
(1 row)

CREATE INDEX tlsh_idx ON test_tlsh USING GIST (v gist_tlsh_ops);
SELECT v, '30e5be217761c8b1c27213314d18b62a58bdbdf02b35d2ababe9352c5e780c1b677795' <-> v AS dist
  FROM test_tlsh
  ORDER BY dist LIMIT 1;
                                   v                                    | dist 
------------------------------------------------------------------------+------
 035EEB9377671B0C785E2C35E9ABABD2352BF0BDBD582AB6184D311372C2B1C8617721 |    3
(1 row)

